<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title>Anime images viewer</title>
  </head>
  <body>

    <h1 class="text-center">List of top animes</h1>
    <table class="table container">
        <thead>
          <tr>
            <th scope="col" class="text-center">Rank</th>
            <th scope="col" class="text-center">Title</th>
            <th scope="col" class="text-center">Score</th>
          </tr>
        </thead>
        <tbody>
            <% animes.forEach(({id, title, ranking, pictures, synopsis, mean}) => { %>
                <tr>
                    <th scope="row" class="text-center align-middle">
                        <%= ranking %>
                    </th>
                    <td>
                        <div class="row">
                            <img class="col-3" src=<%=pictures.medium %> alt=<%= title %> />
                            <div class="col-9">
                                <h4 class="text-center"><%= title %></h4>
                               <p>
                                   <%= synopsis %>
                               </p>
                            </div>
                        </div>
                    </td>
                    <td class="text-center align-middle">
                        <%= mean %>
                    </td>
                  </tr>
              <% }) %>
        </tbody>
      </table>
    <ul>
      
    </ul>

    <nav aria-label="Page navigation">
          <ul class="pagination justify-content-center">
            <% if (currentPage == 1 || currentPage == 0) { %>
              <li class="page-item disabled"><a class="page-link">First</a></li>
            <% } else { %>
              <li><a class="page-link" href="/">First</a></li>
              <li>
                <a
                  class="page-link"
                  href="/?page=<%= Number(currentPage) - 1 %>"
                  >&larr;</a
                >
              </li>
            <% } %> 

              
            
            <% var i = (Number(currentPage) > 5 ? Number(currentPage) - 4 : 1) %> 
            <% if (i !== 1) { %>
              <li class="page-item disabled"><a class="page-link">...</a></li>
            <% } %> 
            <% for (; i <= (Number(currentPage) + 4) && i <= totalPages; i++) { %> 
              <% if (i == currentPage) { %>
                <li class="page-item active"><a class="page-link"><%= i %></a></li>
              <% } else { %>
                <li class="page-item">
                  <a class="page-link" href="/?page=<%= i %>"><%= i %></a>
                </li>
              <% } %> 
              <% if (i == Number(currentPage) + 4 && i < totalPages) { %>
                <li class="page-item disabled"><a class="page-link">...</a></li>
              <% } %> 
            <% } %> 

            <% if (currentPage == totalPages) { %>
              <li class="page-item disabled"><a class="page-link">&rarr;</a></li>
              <li class="page-item disabled"><a class="page-link">Last</a></li>
            <% } else { %>
              <li class="page-item">
                <a
                  class="page-link"
                  href="/?page=<%= Number(currentPage) + 1 %>"
                  >&rarr;</a
                >
              </li>
              <li class="page-item">
                <a class="page-link" href="/?page=<%= totalPages %>"
                  >Last</a
                >
              </li>
            <% } %> 
          </ul>
      </nav>
  </body>
</html>
